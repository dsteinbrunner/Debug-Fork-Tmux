<html><head><title>Spunge::DB</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.22,
  using Pod::Simple::PullParser v3.22,
  under Perl v5.016000.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#CONSTANTS'>CONSTANTS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24TMUX_PATH'>$TMUX_PATH</a>
    <li class='indexItem indexItem2'><a href='#%24TMUX_BIN'>$TMUX_BIN</a>
    <li class='indexItem indexItem2'><a href='#%40TMUX_CMD_NEWW'>@TMUX_CMD_NEWW</a>
    <li class='indexItem indexItem2'><a href='#%40TMUX_CMD_TTY'>@TMUX_CMD_TTY</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#SUBROUTINES%2FMETHODS'>SUBROUTINES/METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#PUBLIC'>PUBLIC</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#DB%3A%3Aget_fork_TTY()'>DB::get_fork_TTY()</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#PRIVATE'>PRIVATE</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#spawn_tty()'>spawn_tty()</a>
      <li class='indexItem indexItem3'><a href='#tmux_new_window()'>tmux_new_window()</a>
      <li class='indexItem indexItem3'><a href='#tmux_window_tty(_%24window_id_)'>tmux_window_tty( $window_id )</a>
      <li class='indexItem indexItem3'><a href='#read_from_cmd(_%24cmd_%3D%3E_%40args_)'>read_from_cmd( $cmd =&#62; @args )</a>
      <li class='indexItem indexItem3'><a href='#croak_on_cmd(_%24cmd_%3D%3E_%40args%2C_%24happen_)'>croak_on_cmd( $cmd =&#62; @args, $happen )</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#CONFIGURATION_AND_ENVIRONMENT'>CONFIGURATION AND ENVIRONMENT</a>
  <li class='indexItem indexItem1'><a href='#DIAGNOSTICS'>DIAGNOSTICS</a>
  <li class='indexItem indexItem1'><a href='#DEPENDENCIES'>DEPENDENCIES</a>
  <li class='indexItem indexItem1'><a href='#BUGS_AND_LIMITATIONS'>BUGS AND LIMITATIONS</a>
  <li class='indexItem indexItem1'><a href='#SUPPORT'>SUPPORT</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Perldoc'>Perldoc</a>
    <li class='indexItem indexItem2'><a href='#Email'>Email</a>
    <li class='indexItem indexItem2'><a href='#Bugs_%2F_Feature_Requests'>Bugs / Feature Requests</a>
    <li class='indexItem indexItem2'><a href='#Source_Code'>Source Code</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
  <li class='indexItem indexItem1'><a href='#DISCLAIMER_OF_WARRANTY'>DISCLAIMER OF WARRANTY</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Spunge::DB - Makes fork() in debugger to open a new Tmux window</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>This documentation refers to the module contained in the distribution <a href="http://search.cpan.org/perldoc?Spunge-DB" class="podlinkpod"
>Spunge-DB</a> version 0.0.7.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>As a helper for the debugger,
the module should be used this way:</p>

<pre>    perl -MSpunge::DB -d your_script.pl</pre>

<p>You should run it from inside the <code>tmux</code> window manager.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The Perl&#39;s standard debugger requires additional stuff when the debugged Perl program use the <a href="http://search.cpan.org/perldoc?perlfunc#fork" class="podlinkpod"
>fork()</a> built-in.</p>

<p>This module is about to solve the trouble which visible like this:</p>

<pre>  ######### Forked, but do not know how to create a new TTY. #########
  Since two debuggers fight for the same TTY, input is severely entangled.

  I know how to switch the output to a different window in xterms, OS/2
  consoles, and Mac OS X Terminal.app only.  For a manual switch, put the
  name of the created TTY in $DB::fork_TTY, or define a function
  DB::get_fork_TTY() returning this.

  On UNIX-like systems one can get the name of a TTY for the given window
  by typing tty, and disconnect the shell from TTY by sleep 1000000.</pre>

<p><code>OS/2</code> is a fun for me but in the past. <code>Mac OS X</code> is a more chance but still isn&#39;t real. And for <code>xterm</code> ... who wants to keep it on your server? Gimme some stones to throw on that one.</p>

<p>But the pseudo-terminal device isn&#39;t much about <code>GUI</code>s by its nature so the problem behind the bars of the <a href="http://search.cpan.org/perldoc?perl5db.pl" class="podlinkpod"
>perl5db.pl</a> report ( see more detailed problem description at the <a href="http://perlmonks.org/?node_id=128283" class="podlinkurl"
>PerlMonks thread</a> ) is the consoles management. It&#39;s a kind of a tricky, for example, to start the next <code>ssh</code> session initiated from the machine serving as an <code>sshd</code> server for the existing session.</p>

<p>Thus we kind of have to give a chance to the consoles management with a software capable to run on a server machine without as much dependencies as an <code>xterm</code>. This module is a try to pick the <a href="http://tmux.sf.net" class="podlinkurl"
>Tmux</a> windows manager for such a task.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONSTANTS"
>CONSTANTS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$TMUX_PATH"
><code>$TMUX_PATH</code></a></h2>

<p><code>Str</code> path to the <code>tmux</code> binary.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$TMUX_BIN"
><code>$TMUX_BIN</code></a></h2>

<p><code>Str</code> the <code>tmux</code> binary fully qualified file name.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="@TMUX_CMD_NEWW"
><code>@TMUX_CMD_NEWW</code></a></h2>

<p><code>Array[Str]</code> the <a href="http://search.cpan.org/perldoc?perlfunc#system" class="podlinkpod"
>system()</a> arguments for a <code>tmux</code> command for opening a new window and with output of a window address in <code>tmux</code>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="@TMUX_CMD_TTY"
><code>@TMUX_CMD_TTY</code></a></h2>

<p><code>Array[Str]</code> the <a href="http://search.cpan.org/perldoc?perlfunc#system" class="podlinkpod"
>system()</a> arguments for a <code>tmux</code> command for finding a <code>tty</code> name in the output. Expects <code>tmux</code>&#39;s window address as the very last argument.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUBROUTINES/METHODS"
>SUBROUTINES/METHODS</a></h1>

<p>All of the following are functions:</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC"
>PUBLIC</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="DB::get_fork_TTY()"
><code>DB::get_fork_TTY()</code></a></h3>

<p>Finds new <code>TTY</code> for the <code>fork()</code>ed process.</p>

<p>Takes no arguments. Returns <code>Str</code> name of the <code>tty</code> device of the &#60;tmux&#62;&#39;s new window created for the debugger&#39;s new process.</p>

<p>Sets the <code>$DB::fork_TTY</code> to the same <code>Str</code> value.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="PRIVATE"
>PRIVATE</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="spawn_tty()"
><code>spawn_tty()</code></a></h3>

<p>Creates a <code>TTY</code> device and returns <code>Str</code> its name.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="tmux_new_window()"
><code>tmux_new_window()</code></a></h3>

<p>Creates a given <code>tmux</code> window and returns <code>Str</code> its id/number.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="tmux_window_tty(_$window_id_)"
><code>tmux_window_tty( $window_id )</code></a></h3>

<p>Checks for a given <code>tmux</code> window&#39;s tty name and returns its <code>Str</code> name.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="read_from_cmd(_$cmd_=&#62;_@args_)"
><code>read_from_cmd( $cmd =&#62; @args )</code></a></h3>

<p>Takes the list containing the <code>Str</code> <a href="http://search.cpan.org/perldoc?perlfunc#system" class="podlinkpod"
>system()</a> command and <code>Array</code> its arguments and executes it. Reads Str the output and returns it. Throws if no output or if the command failed.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="croak_on_cmd(_$cmd_=&#62;_@args,_$happen_)"
><code>croak_on_cmd( $cmd =&#62; @args, $happen )</code></a></h3>

<p>Takes the <code>Str</code> command, <code>Array</code> its arguments and <code>Str</code> the reason of its failure, examines the <code>$?</code> and dies with explanation on the <a href="http://search.cpan.org/perldoc?perlfunc#system" class="podlinkpod"
>system()</a> command failure.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CONFIGURATION_AND_ENVIRONMENT"
>CONFIGURATION AND ENVIRONMENT</a></h1>

<p>The module requires the <a href="http://tmux.sf.net" class="podlinkurl"
>Tmux</a> window manager for the console to be present in the system.</p>

<p>For some while, the configuration is made via the package lexical <a href="#CONSTANTS" class="podlinkpod"
>constants</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DIAGNOSTICS"
>DIAGNOSTICS</a></h1>

<dl>
<dt><a name="The_command_..."
>The command ...</a></dt>

<dd>
<p>Typically the error message starts with the command the <a href="http://search.cpan.org/perldoc?Spunge%3A%3ADB" class="podlinkpod"
>Spunge::DB</a> tried to execute, including the command&#39;s arguments.</p>

<dt><a name="failed_opening_command:_..."
>failed opening command: ...</a></dt>

<dd>
<p>The command was not taken by the system as an executable binary file.</p>

<dt><a name="..._didn&#39;t_write_a_line"
>... didn&#39;t write a line</a></dt>

<dd>
<dt><a name="failed_reading_command:_..."
>failed reading command: ...</a></dt>

<dd>
<p>Command did not output exactly one line of the text.</p>

<dt><a name="..._did_not_finish"
>... did not finish</a></dt>

<dd>
<p>Command outputs more than one line of the text.</p>

<dt><a name="provided_empty_string"
>provided empty string</a></dt>

<dd>
<p>Command outputs exactly one line of the text and the line is empty.</p>

<dt><a name="failed_to_execute:_..."
>failed to execute: ...</a></dt>

<dd>
<p>There was failure executing the command</p>

<dt><a name="child_died_with(out)_signal_X,_Y_coredump"
>child died with(out) signal X, Y coredump</a></dt>

<dd>
<p>Command was killed by the signal X and the coredump is (not) located in Y.</p>

<dt><a name="child_exited_with_value_X"
>child exited with value X</a></dt>

<dd>
<p>Command was not failed but there are reasons to throw an error like the wrong command&#39;s output.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DEPENDENCIES"
>DEPENDENCIES</a></h1>

<p>* <a href="http://search.cpan.org/perldoc?Config" class="podlinkpod"
>Config</a> is available in core <code>Perl</code> distribution since version 5.3.7</p>

<p>* <a href="http://search.cpan.org/perldoc?Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a> is available in core <code>Perl</code> distribution since version 5.9.4</p>

<p>* <a href="http://search.cpan.org/perldoc?Scalar%3A%3AUtil" class="podlinkpod"
>Scalar::Util</a> is available in core <code>Perl</code> distribution since version 5.7.3</p>

<p>* <a href="http://search.cpan.org/perldoc?Sort%3A%3AVersions" class="podlinkpod"
>Sort::Versions</a> is available from <code>CPAN</code></p>

<p>* <a href="http://search.cpan.org/perldoc?Test%3A%3AException" class="podlinkpod"
>Test::Exception</a> is available from <code>CPAN</code></p>

<p>* <a href="http://search.cpan.org/perldoc?Test%3A%3AMore" class="podlinkpod"
>Test::More</a> is available in core <code>Perl</code> distribution since version 5.6.2</p>

<p>* <a href="http://search.cpan.org/perldoc?Test%3A%3AMost" class="podlinkpod"
>Test::Most</a> is available from <code>CPAN</code></p>

<p>* <a href="http://search.cpan.org/perldoc?Test%3A%3AStrict" class="podlinkpod"
>Test::Strict</a> is available from <code>CPAN</code></p>

<p>* <a href="http://search.cpan.org/perldoc?autodie" class="podlinkpod"
>autodie</a> is available in core <code>Perl</code> distribution since version 5.10.1</p>

<p>* <a href="http://search.cpan.org/perldoc?ExtUtils%3A%3AMakeMaker" class="podlinkpod"
>ExtUtils::MakeMaker</a> is available in core <code>Perl</code> distribution since version 5</p>

<p>* <a href="http://search.cpan.org/perldoc?Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a> is available in core <code>Perl</code> distribution since version 5.9.4</p>

<p>* <a href="http://search.cpan.org/perldoc?File%3A%3ASpec" class="podlinkpod"
>File::Spec</a> is available in core <code>Perl</code> distribution since version 5.4.5</p>

<p>* <a href="http://search.cpan.org/perldoc?Cwd" class="podlinkpod"
>Cwd</a> is available in core <code>Perl</code> distribution since version 5</p>

<p>* <a href="http://search.cpan.org/perldoc?Const%3A%3AFast" class="podlinkpod"
>Const::Fast</a> is available from <code>CPAN</code></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS_AND_LIMITATIONS"
>BUGS AND LIMITATIONS</a></h1>

<p>You can make new bug reports, and view existing ones, through the web interface at <a href="http://bugs.vereshagin.org/product/Spunge-DB" class="podlinkurl"
>http://bugs.vereshagin.org/product/Spunge-DB</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SUPPORT"
>SUPPORT</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Perldoc"
>Perldoc</a></h2>

<p>You can find documentation for this module with the perldoc command.</p>

<pre>  perldoc Spunge::DB</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Email"
>Email</a></h2>

<p>You can email the author of this module at <code>peter@vereshagin.org</code> asking for help with any problems you have.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Bugs_/_Feature_Requests"
>Bugs / Feature Requests</a></h2>

<p>Please report any bugs or feature requests by email to <code>peter@vereshagin.org</code>, or through the web interface at <a href="http://bugs.vereshagin.org/product/Spunge-DB" class="podlinkurl"
>http://bugs.vereshagin.org/product/Spunge-DB</a>. You will be automatically notified of any progress on the request by the system.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Source_Code"
>Source Code</a></h2>

<p>The code is open to the world, and available for you to hack on. Please feel free to browse it and play with it, or whatever. If you want to contribute patches, please send me a diff or prod me to pull from your repository :)</p>

<p><a href="http://gitweb.vereshagin.org/Spunge-DB" class="podlinkurl"
>http://gitweb.vereshagin.org/Spunge-DB</a></p>

<pre>  git clone https://github.com/petr999/Spunge-DB.git</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p><a href="http://vereshagin.org" class="podlinkurl"
>Peter Vereshagin</a> &#60;peter@vereshagin.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is Copyright (c) 2012 by Peter Vereshagin.</p>

<p>This is free software, licensed under:</p>

<pre>  The (three-clause) BSD License</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DISCLAIMER_OF_WARRANTY"
>DISCLAIMER OF WARRANTY</a></h1>

<p>BECAUSE THIS SOFTWARE IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE SOFTWARE, TO THE EXTENT PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE SOFTWARE &#34;AS IS&#34; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE SOFTWARE IS WITH YOU. SHOULD THE SOFTWARE PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR, OR CORRECTION.</p>

<p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE SOFTWARE AS PERMITTED BY THE ABOVE LICENCE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE SOFTWARE (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE SOFTWARE TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>

<!-- end doc -->

</body></html>
